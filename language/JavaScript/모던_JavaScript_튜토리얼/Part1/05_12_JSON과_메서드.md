- 복잡한 객체를 다루고 있는 상황
- 네트워크를 통해 객체를 어딘가에 보내거나, 로깅 목적으로 객체를 출력해야 한다면 객체를 문자열로 전환해야 함
- 자바스크립트엔 위와 관련된 기능들이 이미 구현되어 있어, 우리가 직접 코드를 짤 필요가 없음

### 1. JSON.stringify

- JSON은 값이나 객체를 나타내주는 범용 포맷
- RFC 4627 표준에 정의되어 있음
- JSON은 본래 자바스크립트에서 사용할 목적으로 만들어진 포맷
- 데이터 교환 목적으로 사용하는 경우가 많음
  - 특히 클라이언트 측 언어가 자바스크립트일 경우
- 자바스크립트가 제공하는 JSON 관련 메서드
  - `JSON.stringify` : 객체를 JSON으로 바꿔줌
  - `JSON.parse` : JSON을 객체로 바꿔줌
- 객체 `student`에 `JSON.stringify`를 적용해보자

  ```javascript
  let student = {
    name: "John",
    age: 30,
    isAdmin: false,
    courses: ["html", "css", "js"],
    wife: null,
  };

  let json = JSON.stringify(student);

  alert(typeof json); // 문자열이네요!

  alert(json);
  /* JSON으로 인코딩된 객체:
  {
  "name": "John",
  "age": 30,
  "isAdmin": false,
  "courses": ["html", "css", "js"],
  "wife": null
  }
  */
  ```

  - 이렇게 변경된 문자열은 JSON으로 인코딩된(JSON-encoded), 직렬화 처리된(serialized), 문자열로 변환된(stringified), 결집된(marshalled) 객체라 부름
  - 객체는 이렇게 문자열로 변환된 후에야 비로소 네트워크를 통해 전송하거나 저장소에 저장할 수 있음

  - JSON으로 인코딩된 객체는 일반 객체와 다른 특징을 보임
    - 문자열 : 큰따옴표로 감싸야 함
    - 객체 프로퍼티 이름 : 큰따옴표로 감싸야 함
  - JSON.stringify는 객체 뿐만 아니라 원시값에도 적용 가능

  - 적용할 수 있는 자료형

    - 객체 `{...}`
    - 배열 `[...]`
    - 원시형

      - 문자형
      - 숫자형
      - 불린형 값 true와 false
      - null

    - 예시

      ```javascript
      // 숫자를 JSON으로 인코딩하면 숫자입니다.

      alert(JSON.stringify(1)); // 1

      // 문자열을 JSON으로 인코딩하면 문자열입니다(다만, 큰따옴표가 추가됩니다).
      alert(JSON.stringify("test")); // "test"

      alert(JSON.stringify(true)); // true

      alert(JSON.stringify([1, 2, 3])); // [1,2,3]
      ```

- JSON은 데이터 교환을 목적으로 만들어진 언어에 종속되지 않는 포맷
- 자바스크립트 특유의 객체 프로퍼티는 `JSON.stringify`가 처리할 수 없음
- `JSON.stringify` 호출 시 무시되는 프로퍼티는 아래와 같음

  - 함수 프로퍼티 (메서드)
  - 심볼형 프로퍼티 (키가 심볼인 프로퍼티)
  - 값이 `undefined`인 프로퍼티

  ```javascript
  let user = {
    sayHi() {
      // 무시
      alert("Hello");
    },
    [Symbol("id")]: 123, // 무시
    something: undefined, // 무시
  };

  alert(JSON.stringify(user)); // 빈 객체가 출력됨
  ```

- 대개 이 프로퍼티들은 무시되어도 괜찮음
- 이들도 문자열에 포함시켜야 하는 경우가 생기곤 함

  - 관련해서는 아래에서 다룰 것

- `JSON.stringify`의 장점 중 하나 : 중첩 객체도 알아서 문자열로 바꿔줌

  ```javascript
  let meetup = {
    title: "Conference",
    room: {
      number: 23,
      participants: ["john", "ann"],
    },
  };

  alert(JSON.stringify(meetup));
  ```

- `JSON.stringify`를 사용할 때 주의할 점

  - 순환 참조가 있으면 원하는 대로 객체를 문자열로 바꾸는게 불가능

- 예시

  ```javascript
  let room = {
    number: 23,
  };

  let meetup = {
    title: "Conference",
    participants: ["john", "ann"],
  };

  meetup.place = room; // meetup은 room을 참조함
  room.occupiedBy = meetup; // room은 meetup을 참조함

  JSON.stringify(meetup); // Error
  ```
