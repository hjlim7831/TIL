- 자바스크립트 : 함수 지향 언어
  - 개발자에게 많은 자유를 줌
  - 함수 동적 생성 가능
  - 생성한 함수를 다른 함수에 인수로 넘길 수 있음
  - 생성된 곳이 아닌 곳에서 함수를 호출할 수도 있음
- 함수 내부에서 함수 외부에 있는 변수에 접근할 수 있음

  - 함수가 생성된 이후 외부 변수가 변경되면 어떻게 될까?

- 여기선 let, const로 선언한 변수만 다룸
  - var는 오래된 var에서 다룰 것

### 1. 코드 블록

- 코드 블록 `{...}`안에서 선언한 변수는 블록 안에서만 사용할 수 있음

  ```javascript
  {
    // 지역 변수를 선언하고 몇 가지 조작을 했지만 그 결과를 밖에서 볼 수 없습니다.

    let message = "안녕하세요."; // 블록 내에서만 변숫값을 얻을 수 있습니다.

    alert(message); // 안녕하세요.
  }

  alert(message); // ReferenceError: message is not defined
  ```

- 이런 블록은 특정 작업을 수행하는 코드를 한데 묶어 두는 용도로 활용 가능
- 블록 안엔 작업 수행에만 필요한 변수가 들어감

  ```javascript
  {
    // 메시지 출력
    let message = "안녕하세요.";
    alert(message);
  }

  {
    // 또 다른 메시지 출력
    let message = "안녕히 가세요.";
    alert(message);
  }
  ```

- 위 코드에서 블록이 없으면 에러 발생

  - 이미 선언된 변수와 동일한 이름을 가진 변수를 별도의 블록 없이 let으로 선언하면 에러 발생

- if, for, while 등에서도 마찬가지로 `{...}`안에서 선언한 변수는 오직 블록 안에서만 접근 가능
- for 문에서 for 옆 괄호 안에서 선언한 변수도 블록에 속하는 코드로 취급됨

### 2. 중첩 함수

- 함수 내부에서 선언한 함수는 '중첩(nested)' 함수라 부름
- 자바스크립트에선 손쉽게 중첩 함수를 만들 수 있음
- 예시

  ```javascript
  function sayHiBye(firstName, lastName) {
    // 헬퍼(helper) 중첩 함수
    function getFullName() {
      return firstName + " " + lastName;
    }

    alert("Hello, " + getFullName());
    alert("Bye, " + getFullName());
  }
  ```

- 중첩 함수는 새로운 객체의 프로퍼티 형태나 중첩 함수 그 자체로 반환될 수 있음
- 이렇게 반환된 중첩 함수는 어디서든 호출해 사용할 수 있음
- 물론 이때도 외부 변수에 접근할 수 있음

- 예시: `makeCounter`

  ```javascript
  function makeCounter() {
    let count = 0;

    return function () {
      return count++;
    };
  }

  let counter = makeCounter();

  alert(counter()); // 0
  alert(counter()); // 1
  alert(counter()); // 2
  ```
